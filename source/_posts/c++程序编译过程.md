---
style: summer
title: 使用g++逐步编译c文件 
tags:
  - c++
  - g++
  - c
---

一个c程序从源代码到可执行文件需要经过预处理、编译、汇编和链接四个过程，
一个程序员应该了解甚至深入理解上述步骤，这样才能写出性能更高的代码。
学习上述过程，最好的工具还是`docker`+`g++`

<!-- more -->


## Linux下编译一个c程序的具体步骤

1.  下面以test.c为例介绍预处理、编译、汇编和链接的具体指令。
   	* 预处理
		```bash
		g++ -E test.c -o test.i
		# 预处理生成test.i文件
		```
	* 编译为汇编代码
	    ```bash
	    g++ -S test.i -o test.s
	    # 由预处理生成的文件生成汇编语言文件
	    # 可以加入编译优化命令，分三个层次
	    # -O，第一级优化，-O2第二级优化，-O3第三级优化.
	    ```
   	* 汇编生成目标文件
      ```bash
      g++ -c test.s -o test.o
      ```
   	* 链接生成可执行文件
      ```bash
      gcc test.o -o test
      ```
